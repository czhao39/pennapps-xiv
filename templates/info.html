{% extends "layout.html" %}

{% block head %}
    {{ super() }}
    <link rel="stylesheet" href="/css/info.css">
    <script type="text/javascript" src="/js/jquery.timeago.js"></script>
    <script type="text/javascript">
    $(document).ready(function() {
        $(".timeago").timeago();
    });
    </script>
{% endblock %}

{% block content %}
    {{ super() }}
    <div class="row">
        <iframe class="map col s12 m12 l8 offset-l2" src="https://www.google.com/maps/embed/v1/place?q=place_id:{{ place_id }}&key={{ mapkey }}" allowfullscreen></iframe>
    </div>
    <div class="card white">
        <div class="card-content">
            <span class="card-title">Overview</span>
            <pre>{{ overview }}</pre>
        </div>
    </div>
    <div class="card white">
        <div class="card-content">
            <span class="card-title">Public Services</span>
            <table class="responsive-table">
                <thead>
                    <tr>
                        <th>Type</th>
                        <th>Name</th>
                        <th>Distance</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in services %}
                    <tr>
                        {% if item.type == "hospital" %}
                        <td><i class="tiny material-icons">local_hospital</i> Hospital</td>
                        {% elif item.type == "library" %}
                        <td><i class="tiny material-icons">book</i> Public Library</td>
                        {% elif item.type == "book_store" %}
                        <td><i class="tiny material-icons">book</i> Book Store</td>
                        {% elif item.type == "post_office" %}
                        <td><i class="tiny material-icons">email</i> Post Office</td>
                        {% else %}
                        <td>{{ item.type|title }}</td>
                        {% endif %}
                        <td>{{ item.name }}</td>
                        <td>{{ item.dist|round(1) }} mi</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <div class="card white">
        <div class="card-content">
            <span class="card-title">Public Transportation</span>
            <table class="responsive-table">
                <thead>
                    <tr>
                        <th>Type</th>
                        <th>Name</th>
                        <th>Distance</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in transportation %}
                    <tr>
                        {% if item.type == "bus_station" %}
                        <td><i class="tiny material-icons">directions_bus</i> Bus Stop</td>
                        {% elif item.type == "subway_station" %}
                        <td><i class="tiny material-icons">train</i> Subway Station</td>
                        {% else %}
                        <td>{{ item.type|title }}</td>
                        {% endif %}
                        <td>{{ item.name }}</td>
                        <td>{{ item.dist|round(1) }} mi</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <div class="card white">
        <div class="card-content">
            <span class="card-title">Crimes and Accidents</span>
            <table class="responsive-table">
                <thead>
                    <tr>
                        <th>Type</th>
                        <th>Time</th>
                        <th>Distance</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in crimes %}
                    <tr>
                        <td>{{ item.type }}</td>
                        <td class="timeago" title="{{ item.time }}">{{ item.time|format_date }}</td>
                        <td>{{ item.dist|round(1) }} mi</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}
